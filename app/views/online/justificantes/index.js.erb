oTable = $( '#justificantes' ).dataTable();

<% if Rails.env.development? %>
  // console.log("Checking new...");
<% end %>

<% if justificantes.count > 0 %>
  <% if Rails.env.development? %>
  // console.log("found " + <%= justificantes.count %> + " new");
  <% end %>
  // populate temp table with new justificantes, then add to the table via fnAddTr,
  // then remove from temporary
  $( '#temp_table' ).prepend( "<%= j render( justificantes ) %>" );
    $( '#temp_table tr.justificante' ).each(function(){
        oTable.fnAddTr( $( this ).get( 0 ) );
        $( this ).remove();
    });
  // sort the table taking into account the new justificantes
  oTable.fnSort( [ [ 12, 'desc' ] ] );
<% else %>
  <% if Rails.env.development? %>
  // console.log( 'no new as justificantes was ' + <%= justificantes.count %> );
  <% end %>
<% end %>

$( '#justificantes tr.new' ).fadeIn();